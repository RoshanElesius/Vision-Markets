<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vision Markets</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background:none;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      color: #ecf0f1;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    
    #bg-video {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: -1;
}
    .ticker-container {
      background-color: #34495e;
      color: white;
      font-weight: bold;
      font-size: 18px;
      padding: 10px 30px;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 9999;
      display: flex;
      justify-content: center;
    }

    .ticker-content span {
      display: inline-block;
      padding-right: 50px;
      animation: ticker 20s linear infinite;
      white-space: nowrap;
    }

    @keyframes ticker {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    nav {
      background-color: #2c3e50;
      padding: 10px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      width: 100%;
      top: 40px;
      z-index: 10000;
    }
    nav ul {
      list-style-type: none;
      display: flex;
      gap: 30px;
    }

    nav ul li {
      font-size: 18px;
    }

    nav ul li a {
      color: white;
      text-decoration: none;
    }

    nav ul li a:hover {
      color: #1abc9c;
    }

    .logo {
      font-size: 24px;
      font-weight: 600;
    }

    .dark-mode-toggle {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
    }

    .main-content {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
      flex: 1;
      margin-top: 100px;
    }

    .card-container {
      background-color: #2c3e50;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .stock-form {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 30px;
    }

    .stock-form input,
    .stock-form select,
    .stock-form button {
      width: 300px;
      padding: 12px;
      margin: 10px 0;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .stock-form button {
      background-color: #2a81f3c0;
      color: white;
      border: none;
      font-weight: bold;
      cursor: pointer;
    }

    .stock-form button:hover {
      background-color: #2d99f1;
    }

    .stats {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: space-around;
      margin-bottom: 30px;
    }

    .stat-card {
      background-color: #34495e;
      padding: 20px;
      border-radius: 10px;
      color: white;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      text-align: center;
      flex: 1;
      min-width: 200px;
    }

    .chart {
      margin-top: 20px;
    }

    .prediction-card {
      margin-top: 30px;
      background-color: #1c2833;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      text-align: center;
      color: white;
    }

    .prediction-card h3 {
      font-size: 24px;
      margin-bottom: 20px;
    }

    .prediction-card p {
      font-size: 18px;
      margin-bottom: 10px;
    }

    .what-is-stock-prediction {
      background-color: #2c3e50;
      padding: 40px 20px;
      margin-top: 40px;
      border-radius: 15px;
      color: white;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .what-is-stock-prediction h2 {
      font-size: 28px;
      font-weight: 600;
      margin-bottom: 20px;
    }

    .what-is-stock-prediction p {
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 20px;
    }

    .gallery-slider {
      background-color: #1C2833;
      background-image: url('https://cdn.prod.website-files.com/6563ed9/66fed48_Rectangle%20626%20(1).png');
      background-position: center center;
      background-size: cover;
      border-bottom: 1px solid #e4ebf3;
      max-height: 800px;
      padding: 80px 30px 140px;
      position: relative;
      margin-top: 40px;
      color: #fff;
    }

    .gallery-slider h2 {
      font-size: 36px;
      font-weight: 600;
      margin-bottom: 30px;
    }

    .gallery-slider p {
      font-size: 18px;
      margin-bottom: 20px;
    }

    .gallery-slider .news-list {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    .gallery-slider .news-item {
      background-color: rgba(0, 0, 0, 0.6);
      padding: 15px;
      border-radius: 10px;
      transition: background-color 0.3s;
      flex: 1 1 30%;
      position: relative;
    }

    .gallery-slider .news-item:hover {
      background-color: rgba(0, 0, 0, 0.8);
    }

    .gallery-slider .logo-container {
      position: absolute;
      top: 10px;
      left: 10px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      overflow: hidden;
    }

    .gallery-slider .logo-container img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      opacity: 0.6;
    }

    .gallery-slider .news-item h3 {
      font-size: 20px;
      font-weight: bold;
      margin-top: 80px;
    }

    .gallery-slider .news-item p {
      font-size: 16px;
    }

    @media (max-width: 768px) {
      .gallery-slider .news-item {
        flex: 1 1 45%;
      }
    }

    @media (max-width: 480px) {
      .gallery-slider .news-item {
        flex: 1 1 100%;
      }
    }
    .modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-content {
  display: flex;
  width: 900px;
  max-width: 95%;
  height: 550px;
  background-color: #fff;
  border-radius: 10px;
  overflow: hidden;
  position: relative;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
}

.modal-left {
  width: 60%;
  background: url('/static/12.gif') center center / cover no-repeat;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  padding: 20px;
  color: rgba(0, 0, 0, 0.603);
  text-align: center;
}

.modal-left h2 {
  font-size: 28px;
  background: rgba(255, 255, 255, 0.411);
  padding: 12px 24px;
  border-radius: 8px;
  margin-bottom: 12px;
}

.modal-left p {
  font-size: 18px;
  background: rgba(255, 255, 255, 0.507);
  padding: 8px 18px;
  border-radius: 6px;
}

.modal-right {
  width: 40%;
  height: 100;
  background: linear-gradient(to bottom right, #e7ebf3, #b6d4f0);
  padding: 40px 30px;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;  
  align-items: center;  
}
.close-button {
  font-size: 24px;
  color: #333;
  position: absolute;
  top: 10px;
  right: 15px;
  cursor: pointer;
}

.tab-buttons {
  display: flex;
  justify-content: center;
  margin-bottom: 20px;
  gap: 10px;
}

.tab-buttons button {
  padding: 10px 20px;
  font-size: 15px;
  cursor: pointer;
  background-color: #eee;
  border: 1px solid #ccc;
  border-radius: 4px;
}

.tab-buttons button.active {
  background-color: #0b579ed0;
  color: white;
  border-color: #125bbb;
}

.auth-form {
  display: none;
}

.auth-form.active {
  display: block;
}

.auth-form input {
  width: 100%;
  padding: 12px;
  margin-bottom: 15px;
  border: 1px solid #ddd;
  border-radius: 5px;
}

.auth-form button {
  padding: 12px;
  width: 100%;
  background-color: #0b579ed0;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
}

.auth-form button:hover {
  background-color: #125bbb;
}

.learn-more-container {
  display: none; 
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80%; 
  max-width: 750px; 
  max-height: 80vh;
  background: linear-gradient(135deg, #011b3d, #4d6a9b, #96a1b8);
  padding: 20px 30px;
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  z-index: 1000;
  opacity: 0;
  transition: opacity 0.3s ease, transform 0.3s ease;
  transform: scale(0.95);
  overflow: hidden; 
}

.learn-more-container.show {
  display: block; 
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

.learn-more-header {
  text-align: center;
  color: #fff;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 1.6rem;
  margin-bottom: 15px;
}

.learn-more-body {
  color: #fff;
  font-size: 1rem;
  line-height: 1.6;
  margin-bottom: 20px;
  overflow-y: auto; 
  max-height: calc(90vh - 350px); 
  padding-right: 15px; 
}

.learn-more-body ul {
  list-style: none;
  padding-left: 20px;
}

.learn-more-body ul li {
  margin: 10px 0;
  font-size: 1.1rem;
}

.learn-more-footer {
  text-align: center;
  margin-top: 20px;
}

.learn-more-footer .close-btn {
  padding: 12px 25px;
  background-color: #fff;
  color: #6a11cb;
  font-weight: bold;
  font-size: 1.1rem;
  border: none;
  border-radius: 30px;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  transition: background-color 0.3s ease, transform 0.2s ease;
}

.learn-more-footer .close-btn:hover {
  background-color: #6a11cb;
  color: #fff;
  transform: translateY(-3px);
}

.learn-more-footer .close-btn:active {
  transform: translateY(0);
}

.footer {
  background-color: #2c3e50;
  color: white;
  text-align: center;
  padding: 20px;
}
.intro-section {
  display: flex;
  justify-content: space-between;
  align-items: center;
  min-height: 80vh;
  background: linear-gradient(to right, #7ca9c7, #043c69);
  padding: 150px 5% 100px; 
  position: relative;
  z-index: 1;
  gap: 40px;
}

.intro-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.4);
  z-index: 1;
}

.intro-content {
  position: relative;
  z-index: 2;
  color: white;
  max-width: 50%;
  text-align: left;
}

.intro-title {
  font-size: 3rem;
  font-weight: bold;
  margin-bottom: 20px;
}

.intro-description {
  font-size: 1.25rem;
  margin-bottom: 30px;
}

.intro-btn {
  padding: 12px 25px;
  background: #f39c12;
  color: white;
  border-radius: 5px;
  text-decoration: none;
  transition: background 0.3s ease;
}

.intro-btn:hover {
  background: #e67e22;
}

.intro-image {
  max-width: 45%;
  position: relative;
  z-index: 2;
  display: flex;
  justify-content: center;
  align-items: center;
}

.intro-image img {
  width: 100%;
  height: auto;
  border-radius: 12px;
  mix-blend-mode: screen; 
  opacity: 0.85; 
  filter: drop-shadow(0 4px 20px rgba(0, 0, 0, 0.3));
}

.moving-charts {
  position: relative;
  padding: 80px 5% 100px;
  background: rgba(19, 13, 13, 0.452); 
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px); 
  color: #fff;
}

.moving-charts-overlay {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  background: rgba(255, 255, 255, 0.2); 
  z-index: 1;
}

.moving-charts-content {
  position: relative;
  z-index: 2;
  max-width: 1200px;
  margin: 0 auto;
}

.chart-heading {
  text-align: center;
  font-size: 2rem;
  font-weight: 600;
  color: #fff; 
  margin-bottom: 40px;
}

.chart-row {
  display: flex;
  justify-content: space-between;
  gap: 30px;
  margin-bottom: 40px;
}

.chart-text {
  flex: 1;
  padding: 20px;
  background: rgba(255, 241, 241, 0.801); 
  border-radius: 10px;
  color: #333;
  max-width: 45%;
}

.chart-text h3 {
  font-size: 1.2rem;
  font-weight: 600;
  color: #333;
  margin-bottom: 10px;
}

.chart-text p {
  font-size: 1rem;
  color: #555;
}

.chart-content {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  max-width: 45%;
  padding: 10px;
}

.chart-content canvas {
  width: 100%;
  height: 200px;
  background: rgba(255, 255, 255, 0.863);
  border-radius: 10px;
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
}


@media screen and (max-width: 768px) {
  .chart-row {
    flex-direction: column;
    align-items: center;
  }

  .chart-text {
    max-width: 90%;
    margin-bottom: 20px;
  }

  .chart-content {
    max-width: 90%;
    margin-bottom: 20px;
  }
}


  </style>
</head>
<body>

  <div class="ticker-container">
    <div class="ticker-content">
      <span>ðŸš€ Stock Updates: AAPL - $145.67 | TSLA - $720.32 | AMZN - $3,380.23 | Market on the Rise ðŸ“ˆ</span>
    </div>
  </div>

  <video autoplay muted loop id="bg-video">
    <source src="/static/g.mp4" type="video/mp4">
    Your browser does not support HTML5 video.
  </video>
  

  <nav>
    <div class="logo">ðŸ“ˆ Vision Markets</div>
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="#main-content">Live data</a></li>
      <li><a href="#news-insights">Insights</a></li>
      <li><a href="#what-is-stock-prediction">About</a></li>
      <li><a href="#" onclick="toggleModal()">Login/Signup</a></li>
    </ul>
  </nav>

  <section class="intro-section">
    <div class="intro-overlay"></div>
    <div class="intro-content">
      <h1 class="intro-title">Welcome to Vision Markets!</h1>
      <p class="intro-description">
        Your one-stop platform for real-time stock predictions, insights, and news.
      </p>
      <a href="#moving-charts" class="intro-btn">Get Started</a>
    </div>
    <div class="intro-image">
      <img src="static/290.webp" alt="Intro Graphic" />
    </div>
  </section>

  <section id="moving-charts" class="moving-charts">
    <h2 class="chart-heading">ðŸ“Š Live Stock Movements</h2>
  
    <div class="chart-row">
      <div class="chart-content left">
        <canvas id="chart1"></canvas>
      </div>
      <div class="chart-text">
        <h3>Real-Time Analysis</h3>
        <p>Visualize how stock prices shift with live data simulations that bring real-time market fluctuations to your fingertips. Stay ahead of market trends with smooth, animated insights updated every 2 seconds, ensuring that you never miss a beat. Our interactive charts are designed to give you a comprehensive overview of stock movements, allowing you to track price changes, volume shifts, and volatility in real time. Whether you're monitoring a single stock or comparing multiple assets, Vision Marketsâ€™s intuitive dashboard lets you dive deep into the data. With seamless transitions and easy-to-understand visualizations, you can effortlessly analyze market conditions, spot trends, and make informed investment decisions. By integrating live data feeds, we ensure that you have access to the most accurate and timely market information for successful trading strategies.</p>
      </div>
    </div>
  
    <div class="chart-row">
      <div class="chart-text">
        <h3>Multi-Stock Comparison</h3>
        <p>

          Compare price movements across multiple stocks with ease. Understand intricate patterns, identify correlations, and uncover potential opportunities by watching several charts side-by-side. By viewing multiple stock charts in real time, you can quickly spot trends, correlations, and outliers that may not be visible when looking at individual stock performance. Whether you're tracking related sectors or analyzing different market conditions, the ability to compare multiple stocks provides a clearer, more comprehensive view of the market. This feature helps you make better, data-driven decisions by revealing how stocks move in relation to one another, allowing for smarter predictions and more efficient portfolio management.</p>
      </div>
      <div class="chart-content right">
        <canvas id="chart2"></canvas>
      </div>
    </div>
  
    <div class="chart-row">
      <div class="chart-content left">
        <canvas id="chart3"></canvas>
      </div>
      <div class="chart-text">
        <h3>Clean Visuals</h3>
        <p>Charts are designed with readability in mindâ€”featuring a minimalist style, strong contrast, and consistent formatting to enhance clarity and ease of understanding. The sleek, intuitive design ensures that users, whether casual investors or seasoned analysts, can quickly interpret the data at a glance. With carefully selected color palettes and clean, simple layouts, the charts eliminate distractions, allowing you to focus solely on the information that matters most. Whether you are tracking short-term fluctuations or analyzing long-term trends, the streamlined presentation makes complex data accessible and actionable for everyone. This thoughtful design approach ensures that even those new to stock trading can navigate and understand the charts, while still providing depth and precision for experienced professionals.</p>
      </div>
    </div>
  </section>

      <div class="main-content" id="main-content">
        <div class="card-container">
          <div class="stock-form">
            <input type="text" id="stock-symbol" placeholder="Enter stock symbol (e.g., AAPL)" />
            <select id="time-interval">
              <option value="1d">1 Day</option>
              <option value="7d">1 Week</option>
              <option value="30d">1 Month</option>
              <option value="1y">1 Year</option>
            </select>
            <button id="fetch-button">Fetch Stock Data</button>
            <div id="loading" style="display:none;">Loading...</div>
          </div>

      <div class="stats">
        <div class="stat-card">
          <h3>Current Price</h3>
          <p id="current-price">$0.00</p>
        </div>
        <div class="stat-card">
          <h3>Market Cap</h3>
          <p id="market-cap">$0.00</p>
        </div>
        <div class="stat-card">
          <h3>Volume</h3>
          <p id="volume">0</p>
        </div>
      </div>

      <div class="chart">
        <canvas id="stockChart"></canvas>
      </div>

      <div class="prediction-card">
        <h3>Predicted Price for Tomorrow</h3>
        <p id="predicted-price">$0.00</p>
        <p id="confidence-level">Confidence: 0%</p>
      </div>
    </div>

    <div class="what-is-stock-prediction" id="what-is-stock-prediction">
      <h2>What is Stock Prediction?</h2>
      <p>
        Stock prediction refers to the process of forecasting the future price movement of a particular stock or financial instrument. 
        This can be done using various techniques such as historical price analysis, technical indicators, machine learning algorithms, 
        or fundamental analysis of the company's financial health and market conditions.
      </p>
      <p>
        The goal of stock prediction is to help investors and traders make informed decisions regarding buying, selling, or holding 
        stocks. Although it is never 100% accurate, prediction models can provide valuable insights into market trends and price 
        movements based on past data and patterns.
      </p>
      <p>
        It's important to note that stock prices are influenced by a wide range of factors including company performance, 
        global economic conditions, political events, and investor sentiment. As such, predictions should be used alongside other 
        tools and strategies for effective investment planning.<a href="javascript:void(0);" onclick="openLearnMoreModal()">Learn More</a>
      </p>
    </div>

    <div class="gallery-slider" id="news-insights">
      <h2>Stock News & Insights</h2>
      <p>Stay updated with the latest stock market news and insights to help you make informed decisions.</p>
      <div class="news-list">
        <div class="news-item">
          <div class="logo-container">
            <img src="static/apple.jpg" alt="Apple Logo" />
          </div>
          <h3>Apple's New Product Launch</h3>
          <p>Apple Inc. has announced the launch of its latest product, which could have a significant impact on its stock price.</p>
        </div>
        <div class="news-item">
          <div class="logo-container">
            <img src="static/tesla.jpg" alt="Tesla Logo" />
          </div>
          <h3>Tesla Stock Shows Significant Growth</h3>
          <p>Following recent positive earnings, Tesla stock has shown impressive growth and is expected to continue climbing.</p>
        </div>
        <div class="news-item">
          <div class="logo-container">
            <img src="static/amazon.jpg" alt="Amazon Logo" />
          </div>
          <h3>Amazon's Quarterly Report</h3>
          <p>Amazon's latest quarterly report highlights strong growth in their cloud division, pushing stock prices to new heights.</p>
        </div>
      </div>
    </div>
  </div>

<div id="auth-modal" class="modal">
  <div class="modal-content">
    
    <div class="modal-left">
      <h2>Welcome to Vision Markets</h2>
      <p>Track. Predict. Invest.</p>
    </div>

    <div class="modal-right">
      <span class="close-button" onclick="toggleModal()">&times;</span>

      <div class="tab-buttons">
        <button onclick="showTab('login')" id="login-tab" class="active">Login</button>
        <button onclick="showTab('register')" id="register-tab">Register</button>
      </div>

      
      <form id="login-form" class="auth-form active">
        <input type="text" id="login-usermail" placeholder="Usermail" required />
        <input type="password" id="login-password" placeholder="Password" required />
        <button type="submit">Login</button>
      </form>

      <form id="register-form" class="auth-form">
        <input type="text" id="register-username" placeholder="Username" required />
        <input type="email" id="register-usermail" placeholder="Usermail" required />
        <input type="password" id="register-password" placeholder="Password" required />
        <button type="submit">Register</button>
      </form>
    </div>

  </div>
</div>

<div class="learn-more-container">
  <div class="learn-more-content">
    <div class="learn-more-header">
      <h2>Learn More About Stock Price Prediction</h2>
      <p class="subheading">Gain insights into techniques, tools, and risks involved in predicting stock prices.</p>
    </div>
    <div class="learn-more-body">
      <div class="info-columns">
        <div class="info-column">
          <h3>Techniques</h3>
          <p>Stock price prediction involves a combination of statistical methods, machine learning models, and technical analysis. Analysts use historical price data, patterns, and indicators to forecast price movements. Some commonly used techniques include:</p>
          <ul>
            <li><strong>Technical Analysis</strong>: Uses historical price data and volume to identify patterns and trends.</li>
            <li><strong>Machine Learning Models</strong>: Algorithms like regression, neural networks, and decision trees can be trained to predict future prices.</li>
            <li><strong>Fundamental Analysis</strong>: Examines company performance and market conditions to predict price movements.</li>
          </ul>
        </div>
        <div class="info-column">
          <h3>Tools</h3>
          <p>Several tools are available for stock price prediction. These tools help collect, analyze, and visualize financial data to make more accurate predictions:</p>
          <ul>
            <li><strong>Python Libraries</strong>: Libraries like Pandas for data analysis, Scikit-learn for machine learning, and Matplotlib for visualization are commonly used in predictions.</li>
            <li><strong>Trading Platforms</strong>: Tools like MetaTrader and TradingView allow for real-time stock analysis and technical charting.</li>
            <li><strong>Financial Data Providers</strong>: Bloomberg, Yahoo Finance, and Alpha Vantage provide access to essential market data for analysis.</li>
          </ul>
        </div>
        <div class="info-column">
          <h3>Risks</h3>
          <p>Despite the advanced tools and techniques, stock prediction models come with significant risks. It is important to be aware of the following:</p>
          <ul>
            <li><strong>Market Volatility</strong>: Stock prices are heavily influenced by external factors such as geopolitical events, market sentiment, and economic data.</li>
            <li><strong>Model Overfitting</strong>: Complex models may fit historical data perfectly but fail to generalize to future data.</li>
            <li><strong>Data Quality</strong>: Predictions are only as good as the data they are based on. Poor-quality data can lead to inaccurate forecasts.</li>
          </ul>
        </div>
      </div>
    </div>
      <button class="close-btn" onclick="closeLearnMoreModal()">Close</button>
    </div>
  </div>
</div>

  <footer class="footer">
    <p>&copy; 2025 Vision Markets Inc. All rights reserved.</p>
  </footer>

  <script>
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }

    document.getElementById('fetch-button').addEventListener('click', function () {
      const stockSymbol = document.getElementById('stock-symbol').value.trim().toUpperCase();
      const timeInterval = document.getElementById('time-interval').value;
      const loading = document.getElementById('loading');
      loading.style.display = 'block';

      fetch(`/api/stock?symbol=${stockSymbol}&interval=${timeInterval}`)
        .then(response => {
          if (!response.ok) throw new Error("Stock not found");
          return response.json();
        })
        .then(data => {
          document.getElementById('current-price').innerText = `$${data.currentPrice.toFixed(2)}`;
          document.getElementById('market-cap').innerText = `$${(data.marketCap / 1e9).toFixed(2)}B`;
          document.getElementById('volume').innerText = data.volume.toLocaleString();
          document.getElementById('predicted-price').innerText = `$${data.predictedPrice.toFixed(2)}`;
          document.getElementById('confidence-level').innerText = `Confidence: ${data.confidenceLevel}%`;
          updateChart(data.history);
        })
        .catch(error => {
          alert("Error: " + error.message);
        })
        .finally(() => {
          loading.style.display = 'none';
        });
    });

    let stockChart;
    function updateChart(history) {
      const labels = history.map(entry => entry.date);
      const prices = history.map(entry => entry.price);
      const ctx = document.getElementById('stockChart').getContext('2d');

      if (stockChart) stockChart.destroy();

      stockChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [{
            label: 'Stock Price',
            data: prices,
            borderColor: 'rgba(26, 188, 156, 1)',
            backgroundColor: 'rgba(26, 188, 156, 0.2)',
            borderWidth: 2,
            fill: true,
            tension: 0.3
          }]
        },
        options: {
          responsive: true,
          plugins: {
            tooltip: {
              backgroundColor: '#34495e',
              titleColor: '#fff',
              bodyColor: '#fff',
              borderColor: '#1abc9c',
              borderWidth: 1
            }
          },
          scales: {
            y: { beginAtZero: false }
          }
        }
      });
    }

    function toggleModal() {
      const modal = document.getElementById('auth-modal');
      const modalContent = document.querySelector('.modal-content');
      modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
      setTimeout(() => modalContent.classList.toggle('show'), 100);
    }

    function showTab(tab) {
      const loginForm = document.getElementById('login-form');
      const registerForm = document.getElementById('register-form');
      const loginTab = document.getElementById('login-tab');
      const registerTab = document.getElementById('register-tab');

      if (tab === 'login') {
        loginForm.classList.add('active');
        registerForm.classList.remove('active');
        loginTab.classList.add('active');
        registerTab.classList.remove('active');
      } else {
        registerForm.classList.add('active');
        loginForm.classList.remove('active');
        registerTab.classList.add('active');
        loginTab.classList.remove('active');
      }
    }

    document.getElementById('login-form').addEventListener('submit', async function(event) {
  event.preventDefault();
  const usermail = document.getElementById('login-usermail').value;
  const password = document.getElementById('login-password').value;

  try {
    const response = await fetch('/login', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ usermail, password }),
    });
    
    const data = await response.json();  
    if (data.success) {
  window.location.href = data.redirect_url; 
    } else {
      alert('Login failed: ' + data.message);
    }
  } catch (error) {
    alert('An error occurred: ' + error.message);
  }
});

    document.getElementById('register-form').addEventListener('submit', async function(event) {
      event.preventDefault();
      const username = document.getElementById('register-username').value;
      const usermail = document.getElementById('register-usermail').value;
      const password = document.getElementById('register-password').value;

      try {
        const response = await fetch('/register', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ username, usermail, password }),
        });

        const data = await response.json();
        if (data.success) {
      alert('Registration successful! Please log in.');

      
      showTab('login');

      document.getElementById('register-form').reset();
        } else {
          alert('Registration failed: ' + data.message);
        }
      } catch (error) {
        alert('An error occurred: ' + error.message);
      }
    });
function openLearnMoreModal() {
  const modal = document.querySelector('.learn-more-container');
  modal.style.display = 'flex';
  setTimeout(() => {
    modal.classList.add('show'); 
  }, 50);
}

function closeLearnMoreModal() {
  const modal = document.querySelector('.learn-more-container');
  modal.classList.remove('show'); 
  setTimeout(() => {
    modal.style.display = 'none';
  }, 300);
}
    const filePaths = [
      '/static/stocks_data1.csv',
      '/static/stocks_data2.csv',
      '/static/stocks_data3.csv',
    ];
    const canvasIds = ['chart1', 'chart2', 'chart3'];
    const chartInstances = {};
    const pointsToShow = 10;

    const colors = [
      ['#2980b9', 'rgba(52, 152, 219, 0.2)'],
      ['#27ae60', 'rgba(46, 204, 113, 0.2)'],
      ['#e67e22', 'rgba(243, 156, 18, 0.2)'],
    ];

    async function loadCSV(url) {
      const response = await fetch(url);
      const text = await response.text();
      const rows = text.trim().split('\n').slice(1);
      return rows.map(row => {
        const [date, price] = row.split(',');
        return { date, price: parseFloat(price) };
      });
    }

    async function setupCharts() {
      const allData = await Promise.all(filePaths.map(loadCSV));
      allData.forEach((data, index) => {
        createMovingChart(canvasIds[index], data, `mychart${index + 1}`, index);
      });
    }

    function createMovingChart(canvasId, data, chartName, index) {
      let currentIndex = 0;
      const ctx = document.getElementById(canvasId).getContext('2d');

      chartInstances[chartName] = new Chart(ctx, {
        type: 'line',
        data: {
          labels: [],
          datasets: [{
            label: `Stock ${index + 1}`,
            data: [],
            borderColor: colors[index][0],
            backgroundColor: colors[index][1],
            borderWidth: 2,
            fill: true,
            tension: 0.3
          }]
        },
        options: {
          responsive: true,
          scales: {
            x: {
              ticks: { color: '#000' }
            },
            y: {
              ticks: { color: '#000' }
            }
          },
          plugins: {
            legend: {
              labels: {
                color: '#000'
              }
            }
          }
        }
      });

      setInterval(() => {
        if (currentIndex + pointsToShow >= data.length) currentIndex = 0;

        const slice = data.slice(currentIndex, currentIndex + pointsToShow);
        chartInstances[chartName].data.labels = slice.map(d => d.date);
        chartInstances[chartName].data.datasets[0].data = slice.map(d => d.price);
        chartInstances[chartName].update();
        currentIndex++;
      }, 2000);
    }

    window.addEventListener('DOMContentLoaded', setupCharts);
</script>
</body>
</html>
